<!-- dashboard.ejs -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Verdana, Arial, Helvetica, sans-serif;
            background-image: url('/img/19335268_6085949.jpeg');
            color: #fff;
            height: fit-content;
            backdrop-filter: blur(5px);
        }

        
        .container {
            width: calc(100% - 200px);
            position: relative;
            left: 0px;
            right: 0px;
            height: 100%;

        }

        .container>* {
            margin: auto 0;
        }

        nav {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0px 20px;
            width: 100%;
            position: relative;
            top: 10px;
        }

        .logo {
            font-size: 30px;
            background-color: #0000003d;
            padding: 2px;
        }

        .logo img{
            width: 35px;
            margin-bottom: 0px;
        }
        .account{
            display: none;
            position: absolute;
            width: 35px;
            right: 80px;
            top: 5px;
        }

        .content {
            display: grid;
            place-items: center;
            color: rgba(0, 0, 0, 0.626);
            font-weight: 600;
        }

        .content ul {
            padding: 0px 50px;
            position: relative;
        }

        .content ul li {
            margin-top: 0px;
        }

        .content ul:first-child {
            display: inherit;
            min-width: 400px;
        }

        .content ul li span#task {
            font-size: 25px;
            float: left;
            color: rgb(3, 3, 3);
        }

        .content ul li button#showFormBtn {
            background: green;
            float: right;
            border: 0 solid green;
            font-size: 15px;
            padding: 8px 15px;
            color: white;
        }

        .content ul li.details {
            margin: 20px 0;
            background-color: rgb(246, 249, 173);
            border-radius: 10px;
            padding: 10px 30px;
            position: relative;
            width: 400px;
            box-shadow: 2px 2px 6px #9f813a, inset 1px 2px 6px #9f813a;
        }

        .heading {
            font-size: 23px;
            display: inline;
            color: #000;
        }

        .details span {
            font-size: 16px;
            position: absolute;
            right: 8px;
            color: #000;

        }

        a {
            color: #fff;
            text-decoration: none;
        }

        .description{
            width:150px;
        }


        .profile {
            /* height: 100%; */
            height: 100vh;
            width: 200px;
            /* width: 15%; */
            position: fixed;
            top: 0;
            right: 0;
            float: right;
            background-color: rgba(0, 0, 255, 0.192);
            padding-top: 20px;
        }

        .profile>* {
            margin: 20px  10px auto 10px
        }

        .profile h2 {
            margin-left: 20px;
        }

        .profile ul li a {
            color: #fff;
            text-decoration: none;
            margin-top: 25px;
            display: block;
            transition: 0.5s;
        }

        .profile ul span#pending {
            border-left: 3px solid red;
            padding-left: 5px;
        }

        .profile ul span#completed {
            border-left: 3px solid green;
            padding-left: 5px;
        }

        .profile ul span#total {
            border-left: 3px solid yellow;
            padding-left: 5px;
        }

        ul li {
            list-style-type: none;
        }

        

        .content ul .check {
            position: absolute;
            height: 34px;
            right: -45px;
            top: 10%;
            border: 2px solid green;
            padding: 3px;
            border-radius: 5px;
            transition: transform 0.3s;
        }
        .content ul .done {
            position: absolute;
            height: 34px;
            right: -45px;
            top: 10%;
            padding: 3px;
            border-radius: 5px;
        }

        .content ul .check:hover {
            transform: scale(1.1);
        }

        .content ul .delete {
            position: absolute;
            height: 34px;
            right: -45px;
            top: 62%;
            border: 2px solid red;
            padding: 3px;
            border-radius: 5px;
            transition: transform 0.3s;
        }

        .content ul .delete:hover {
            transform: scale(1.1);
        }

        #taskFormContainer {
            margin-top: 25px;
        }

        #taskFormContainer form {
            padding: 30px;
            display: grid;
            justify-content: center;
            position: relative;
            border-radius:8px; 
            background-color: #f8e8b3;
            box-shadow: 2px 2px 6px #ebcd89, inset 1px 2px 6px #ebcd89;
        }

        #taskFormContainer form>* {
            margin: 1px;
            font-size: 16px;
            border: 0;
        }
        #taskFormContainer form #submit{
            background: green;
            border: 0 solid green;
            padding: 8px 15px;
            color: white;
        }
        #taskFormContainer form #date, #taskFormContainer form #time,#taskFormContainer form #category{
            padding: 8px 15px;
            color: black;
        }
        #cancelBtn{
            width: 20px;
            position: absolute;
            right: 5px;
            top: 5px;
        }
        #cancel{
            width: 18px;
            position: absolute;
            right: 5px;
            top: 0;
        }
        .profile ul li a {
            color: #fff;
            text-decoration: none;
            margin-top: 25px;
            display: block;
            transition: 0.5s;
            font-size: 16px;
        }

        .profile ul li a:hover {
            color: rgb(109, 104, 180);
        }
        @media screen and (max-width: 900px) {

            .account{
            display: block;
            }
            .profile {
                display: none;
                background-color: navy ;
            }

            .container {
                width: 100%;
                left: 0;
                right: 0;
            }

            .content {
                left: 0;
                width: 100%;
            }

            ul li {
                width: 100%;
                padding: 0;
                margin: 0;
            }

            .content ul li.details {
                margin: 10px 0;
                background-color: rgb(246, 249, 173);
                border-radius: 10px;
                padding: 5px 15px;
                position: relative;
                width: 250px;
                box-shadow: 2px 2px 6px #9f813a, inset 1px 2px 6px #9f813a;
                font-size: 14px;
            }

            .date,
            .heading {
                font-size: 18px;
                color: black;
                font-family: 'Times New Roman', Times, serif;
            }

            .logo {
                font-size: 25px;
            }

            .logo img {
                width: 20px;
            }
            #taskFormContainer form>*{
                font-size: 14px;
            }
        }
    </style>
</head>

<body>
    <% let pending=0 %>
        <% let completed=0 %>
            <% let count=0 %>
                <div class="app-layout">
                    <div class="container">
                        <nav>
                            <h1 class="logo"><img src="/img/list-icon-1423.png" alt="">Tasks</h1>
                            <!-- <a>Hello, <%= username %>!</a> -->
                            <div class="auth-buttons">
                                <img src="/img/account.png" class="account" id="account" alt="">
                                <a id="logout" href="/user/logout">Logout</a>
                            </div>
                        </nav>


                        <div class="content" id="taskFormContainer" style="display: none;">
                            <form action="/task/addtask" method="post">
                                <img src="/img/close.png" id="cancelBtn" alt="">
                                <input type="text" placeholder="Enter Task" name="task" id="text"><br>
                                <!-- <input type="text" placeholder="Enter Description" name="description"
                                    id="description"><br> -->
                                <textarea name="description" placeholder="Enter Description" id="description" cols="30"
                                    rows="5"></textarea><br>
                                    
                                <label for="category">Category:</label>
                                <select name="category" id="category">
                                    <option value="personal">Personal</option>
                                    <option value="work">Work</option>
                                    <option value="shopping">Shopping</option>
                                    <option value="others">Others</option>
                                </select><br>
                                <label for="date">Date:</label>
                                <input type="date"  name="date" id="date"><br>
                                <label for="time">Time:</label>
                                <input type="time" name="time" id="time"><br>
                                <input type="submit" id="submit" value="Add New Task">
                                <!-- <button type="button" id="cancelBtn">Cancel</button> -->
                            </form>
                        </div>
                        <br>
                        <br>

                        <div class="content">

                            <ul>
                                <li><span id="task">All Tasks</span><button id="showFormBtn">Add New Task</button></li>
                                <% data.forEach(element=> { %>
                                    <li class="details <% if (element.completed==true) { %>
                                        completed
                                    <% } %>">
                                        
                                        <p class="heading">
                                            <%= element.task %>
                                        </p>
                                        <span class="date">
                                            <%= element.date %>
                                            <br>
                                            <%= element.time %>

                                        </span>
                                        <div class="">
                                            <p class="description">
                                                <%= element.description %>
                                            </p>
                                            <!-- <span class="category">
                                            <%= element.category %>
                                        </span> -->
                                            <hr>
                                            <p style="color: green;">Task Created at
                                            </p>
                                            <p>
                                                <%= element.currentDate %>
                                            </p>
                                            <% count++ %>
                                                <% if (element.completed==false) { %>
                                                    <% pending++ %>
                                                        <% } else { %>
                                                            <% completed++ %>
                                                                <% } %>
                                        </div>
                                        <% if (element.completed==true) { %>
                                            <img src="/img/done.png" class="done"
                                            alt="check mark">
                                        <% } else { %>
                                        <img src="/img/checked.png" data-task-id="<%= element._id %>" class="check"
                                            alt="check mark">
                                        <% } %>
                                        <img src="/img/delete.png" data-task-id="<%= element._id %>" class="delete"
                                            alt="delete">
                                    </li>
                                    
                                    <% }); %>
                                    <% if (pending==0 ) { %>
                                        <br>
                                        <li>No Tasks Pending</li>
                                    <% } %>
                            </ul>
                        </div>
                    </div>
                    <div class="profile" id="profile">
                        <img src="/img/close.png" id="cancel" alt="">
                        <h2>Hello, <%= username %>
                        </h2>
                        <ul>
                            <li id="pendingTasks"><a href="#">Pending Tasks</a></li>
                            <span id="pending">
                                <%= pending %>
                            </span>
                            <li id="completedTasks"><a href="#">Completed Tasks</a></li>
                            <span id="completed">
                                <%= completed %>
                            </span>
                            <li id="allTasks"><a href="#">All Tasks</a></li>
                            <span id="total">
                                <%= count %>
                            </span>
                        </ul>
                    </div>
                </div>
                <script src="/js/dashscript.js"></script>
</body>

</html>